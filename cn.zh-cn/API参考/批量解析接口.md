# 批量解析接口<a name="ZH-CN_TOPIC_0156607180"></a>

## 功能介绍<a name="zh-cn_topic_0139697199_section1436243124012"></a>

该API面向数据面提供，用于HTTPDNS批量解析域名。所谓批量解析，指的是在一次解析请求中，可以对一个线路（client IP）同时解析多个域名 或者 对同一个域名，解析多个线路的record。

## URI<a name="zh-cn_topic_0139697199_section129173713450"></a>

http://49.4.57.102/\{ account \_id\}/batch-resolve?domains=\{domain1,domain2,domain3\}&ips=\{ip\}

http://49.4.57.102/\{ account \_id\}/batch-resolve?domains=\{domain\}&ips=\{ip1,ip2,ip3\}

## 请求<a name="section141651027165215"></a>

无

## 正常响应<a name="section436781916525"></a>

```
[
  {
    "client_ip":"1.2.6.30",
    "ttl":60,
    "domain":"www.sina.com.cn",
    "ips":[
           "222.76.214.60"
           ]
   },
   {
     "client_ip":"1.2.8.30",
     "ttl":60,
     "domain":"www.sina.com.cn",
     "ips":[
             "123.126.157.222"
            ]
   }
]
```

## 异常响应<a name="zh-cn_topic_0139697199_section118740016481"></a>

-   样例1：一次请求中同时带了多个ip和多个域名

    http://192.145.23.79/10000/batch-resolve?domains=www.jd.com,www.baidu.com&ips=1.2.6.30,1.3.4.5

    ```
    {
    "msg":"Invalid batch request : reveive query with 2 ips and 2 domains",
    "code":"400"
    }
    ```

-   样例2：所带域名或者IP过多

    http://192.145.23.79/10000/batch-resolve?domains=www.163.com,www.baidu.com,www.jd.com,www.z.cn,www.renren.com,www.juniper.net,www.facebook.com,www.huawei.com,www.google.com,www.hao123.com,www.apple.com

    ```
    {
    "msg":"Batch-resolve support up to 10 resolvers",
    "code":400
    }
    ```

-   样例3：鉴权失败

    http://192.145.23.79/10000/batch-resolve?domains=www.chainnet.com.com,www.jd.com,www.baidu.com&ips=1.2.6.30

    ```
    {
    "msg":"authentication failed : www.chainnet.com.com",
    "code":401
    }
    ```

-   非法域名/IP

    http://192.145.23.79/10000/batch-resolve?domains=www.163.com&ips=1.2.6.30,1.2.8.30,1.9.6.

    ```
    {
    "msg":"Invalid IPV4 ip : 1.9.6.",
    "code":400
    }
    ```


